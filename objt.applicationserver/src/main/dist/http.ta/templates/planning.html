<div class="row">

    <div>
      <h3><!--TRANSLATE(Planned Attendances)--></h3>
    </div>
		
    <form class='form-inline' action='javascript:void(0);'>
      <div class="form-group">
        <label for="yearpicker"><!--TRANSLATE(Year)--></label>
        <div class='input-group date' id='yearpicker'>
          <input type="text" class='form-control col-xs-2' id='yearpickerTxt' onkeydown="if (event.keyCode == 13) showReportinLine('png')">
          <div class="input-group-addon">
            <span class="glyphicon glyphicon-calendar"></span>
				  </div>
			  </div>
		  </div>
      <div class="form-group">
				<button class='btn btn-default' onclick="showReportinLine('png')" alt="<!--TRANSLATE(Refresh)-->"><span class="glyphicon glyphicon-refresh"></span></button>
				<button class='btn btn-default' onclick="showReportoutLine('pdf')" alt="<!--TRANSLATE(Export to PDF)-->"><span class="glyphicon glyphicon-share"></span></button> 
		  </div>
		</form>
			<br/>
      <div class="edge_general subpages_general">
      <div id="report" width="844" height="888">
        <div id="loading_text"></div>
          <image onLoad="imageloaded();" id ="loading_image">
        </div>
      </div>
</div>

<script language="javascript" type="text/javascript">

function imageloaded()
{
  document.getElementById('loading_text').innerHTML="";
}

function showReportinLine(format)
{
  document.getElementById('loading_text').innerHTML="<!--TRANSLATE(Generating Report.)-->";
  var year = document.getElementById('yearpickerTxt').value;
  document.getElementById("loading_image").setAttribute('src', 'planningReport?year=' + year + '&format=' + format + '&reportConfig=EMPLOYEEPLANNINGREPORT_WEB&requesttime=' + new Date());
}

function showReportoutLine(format)
{
  var year = document.getElementById('yearpickerTxt').value; 
  window.open('planningReport?year=' + year + '&format=' + format + '&reportConfig=EMPLOYEEPLANNINGREPORT');
}

// Configure datepicker
$("#yearpicker").datetimepicker({
  defaultDate: new Date(),
	viewMode: 'years',
	format: 'YYYY',
	focusOnShow: false,
	locale: language
});

$("#yearpicker").on("dp.change", function(e) {
  showReportinLine('png');
});


showReportinLine('png');

</script>
